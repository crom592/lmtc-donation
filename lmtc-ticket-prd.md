# 구리 성광교회 LMTC 4기 선교여행 후원 티켓 시스템 PRD

## 1. 프로젝트 개요

### 1.1 목적
- 구리 성광교회 LMTC 4기 선교여행을 위한 후원금 모집
- 바자회 및 교회 카페에서 사용할 수 있는 디지털 티켓 발행 및 관리
- 투명한 후원금 관리 및 티켓 사용 현황 추적

### 1.2 배경
- 선교여행 준비를 위한 효율적인 후원금 모집 필요
- 기존 오프라인 티켓의 분실 및 관리 어려움 해결
- 투명하고 체계적인 후원금 관리 시스템 구축

### 1.3 목표
- 온라인 티켓 구매 및 결제 시스템 구축
- 모바일 친화적인 티켓 발행 및 사용 시스템
- 관리자용 대시보드를 통한 효율적인 운영 관리

## 2. 핵심 사용자

### 2.1 주요 사용자
- **구매자**: 교회 성도들 (후원자)
- **판매자**: 바자회/카페 운영진
- **관리자**: LMTC 4기 운영진

### 2.2 사용자 페르소나

#### 구매자 (성도/후원자)
- 연령: 20-70세
- 특징: 스마트폰 기본 사용 가능, 간단한 결제 프로세스 선호
- 니즈: 쉽고 빠른 티켓 구매, 안전한 결제, 티켓 사용의 편의성

#### 판매자 (바자회/카페 운영진)
- 연령: 30-60세  
- 특징: 스마트폰으로 간단한 확인 작업 수행
- 니즈: 빠른 티켓 확인, 사용 처리, 판매 현황 파악

#### 관리자 (LMTC 4기 운영진)
- 연령: 20-50세
- 특징: 전체 시스템 관리 및 모니터링 담당
- 니즈: 실시간 현황 파악, 상세한 거래 내역 관리, 보고서 생성

## 3. 핵심 기능

### 3.1 티켓 구매 시스템
- **티켓 종류별 구매**
  - 바자회 이용권 (금액별 옵션)
  - 카페 이용권 (음료/디저트별 옵션)
- **구매 프로세스**
  - 티켓 선택 → 개인정보 입력 → 결제 정보 확인 → 구매 완료
- **결제 연동**
  - 계좌이체 정보 안내
  - 입금 확인 후 티켓 활성화

### 3.2 티켓 발행 및 관리
- **디지털 티켓 생성**
  - 고유 QR코드 생성
  - 티켓 정보 (구매자, 금액, 유효기간 등)
- **티켓 상태 관리**
  - 미사용/사용완료/만료 상태 구분
  - 실시간 상태 업데이트

### 3.3 티켓 사용 시스템
- **QR코드 스캔**
  - 판매자용 QR 스캔 기능
  - 티켓 정보 즉시 확인
- **사용 처리**
  - 원터치 사용 확인
  - 사용 시간 및 장소 기록

### 3.4 관리자 대시보드
- **실시간 현황**
  - 총 판매량 및 매출
  - 미사용 티켓 현황
  - 일별/주별 통계
- **상세 관리**
  - 구매자별 거래 내역
  - 판매자별 처리 현황
  - 환불 및 취소 처리

## 4. 기술 스택

### 4.1 프론트엔드
- **Framework**: Next.js 14 (App Router)
- **UI Library**: Tailwind CSS + shadcn/ui
- **상태관리**: React Context API
- **QR코드**: qrcode.js, jsqr

### 4.2 백엔드
- **API**: Next.js API Routes
- **데이터베이스**: Neon PostgreSQL
- **ORM**: Prisma

### 4.3 인프라
- **호스팅**: Vercel
- **도메인**: Vercel 제공 도메인 또는 커스텀 도메인
- **SSL**: Vercel 자동 제공

## 5. 데이터베이스 설계

### 5.1 핵심 테이블

```sql
-- 사용자 테이블
users (
  id, name, phone, email, role, created_at
)

-- 티켓 종류 테이블
ticket_types (
  id, name, description, price, category, active, created_at
)

-- 주문 테이블
orders (
  id, user_id, total_amount, status, payment_info, created_at
)

-- 티켓 테이블
tickets (
  id, order_id, ticket_type_id, qr_code, status, 
  issued_at, used_at, used_by, created_at
)

-- 사용 내역 테이블
usage_logs (
  id, ticket_id, used_by, location, notes, created_at
)
```

### 5.2 관계 설계
- User : Order = 1 : N
- Order : Ticket = 1 : N  
- TicketType : Ticket = 1 : N
- Ticket : UsageLog = 1 : N

## 6. 주요 화면 구성

### 6.1 사용자 화면
- **메인 페이지**: 티켓 종류 선택
- **구매 페이지**: 수량 선택 및 구매자 정보 입력
- **결제 안내 페이지**: 계좌 정보 및 입금 안내
- **티켓 보관함**: 구매한 티켓 목록 및 QR코드
- **티켓 상세**: 개별 티켓 QR코드 및 정보

### 6.2 판매자 화면
- **QR 스캔 페이지**: 카메라를 통한 QR코드 스캔
- **티켓 확인 페이지**: 스캔된 티켓 정보 확인
- **사용 처리 페이지**: 사용 확인 및 완료 처리

### 6.3 관리자 화면
- **대시보드**: 전체 현황 및 통계
- **주문 관리**: 주문 목록 및 상태 관리
- **티켓 관리**: 티켓 현황 및 개별 관리
- **사용자 관리**: 구매자 및 판매자 관리
- **보고서**: 매출 및 사용 현황 보고서

## 7. 사용자 플로우

### 7.1 구매자 플로우
1. 메인 페이지 접속
2. 티켓 종류 및 수량 선택
3. 구매자 정보 입력 (이름, 연락처)
4. 주문 확인 및 결제 안내 확인
5. 계좌이체 실행
6. 입금 확인 후 티켓 활성화 알림
7. 티켓 보관함에서 QR코드 확인

### 7.2 판매자 플로우
1. 판매자 페이지 접속
2. QR코드 스캔
3. 티켓 정보 확인
4. 사용 승인 처리
5. 사용 완료 확인

### 7.3 관리자 플로우
1. 관리자 대시보드 접속
2. 입금 확인 및 티켓 활성화
3. 전체 현황 모니터링
4. 필요시 수동 처리 (환불, 재발행 등)

## 8. 비기능적 요구사항

### 8.1 성능
- 페이지 로딩 시간: 3초 이내
- QR코드 스캔 응답 시간: 2초 이내
- 모바일 최적화: 반응형 디자인

### 8.2 보안
- HTTPS 필수 적용
- QR코드 위변조 방지 (해시 검증)
- 개인정보 최소 수집 및 보호

### 8.3 사용성
- 모바일 퍼스트 디자인
- 직관적인 UI/UX
- 오프라인 상황 고려 (캐시 활용)

## 9. 출시 계획

### 9.1 개발 단계
- **1단계** (1-2주): 기본 구조 및 데이터베이스 설계
- **2단계** (2-3주): 티켓 구매 및 발행 시스템
- **3단계** (1-2주): QR코드 스캔 및 사용 시스템  
- **4단계** (1-2주): 관리자 대시보드
- **5단계** (1주): 테스트 및 배포

### 9.2 테스트 계획
- 내부 테스트: LMTC 운영진 대상
- 베타 테스트: 일부 성도 대상
- 피드백 반영 및 최종 배포

## 10. 성공 지표

### 10.1 정량적 지표
- 총 티켓 판매액
- 티켓 사용률 (발행 대비 사용 비율)
- 시스템 오류 발생률 (< 1%)
- 사용자 만족도 (설문조사)

### 10.2 정성적 지표
- 사용 편의성 개선 정도
- 운영진 업무 효율성 향상
- 투명한 후원금 관리 달성

## 11. 리스크 및 대응방안

### 11.1 기술적 리스크
- **QR코드 인식 오류**: 조명, 화질 대응 알고리즘 적용
- **서버 과부하**: Vercel의 확장성 활용
- **데이터 손실**: Neon DB 백업 정책 수립

### 11.2 운영상 리스크  
- **입금 확인 지연**: 실시간 알림 시스템 구축
- **사용자 교육 부족**: 간단한 사용법 안내 자료 제작
- **부정 사용**: QR코드 보안 강화 및 모니터링

## 12. 향후 확장 계획

### 12.1 기능 확장
- 자동 결제 연동 (PG사 연동)
- 푸시 알림 시스템
- 다국어 지원 (영어/중국어)

### 12.2 적용 확장
- 다른 교회 행사 적용
- 지역 교회 네트워크 확산
- 상용 서비스화 검토